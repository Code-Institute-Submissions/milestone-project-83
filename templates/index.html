{% extends 'base.html' %}
{% block nav_links %}
<li><a href="{{url_for('index')}}">Home</a></li>
<li><a href="{{url_for('login')}}">Log In </a></li>
<li><a href="{{url_for('signup')}}">Sign Up</a></li>
{% endblock %}
{% block content %}
<div class="container-fluid">
{% if user %}
<!--Fab Menu-->
    <div class="fixed-action-btn" id="cards-fab">
        <a class="btn-floating horizontal btn-large red" id="cards-fab-main-btn">
        <i class="large material-icons">dashboard</i>
        </a>
        <ul id="goal-fab-ul">
        {% if (goals | length) < 4%}
        <li>
            <a class="btn-floating darken-1 goal-fab-card"><i class="material-icons">add</i></a
            >
        </li>
        {% endif %} {% for goal in goals %}
        <li>
            <a class="btn-floating darken-1 goal-fab-card" href="{{url_for('goal_view', username=user.username, goal_id=goal._id)}}" style="background-image: url({{ goal.image_url }})"></a>
        </li>
        {% endfor %}
        </ul>
    </div>
{% endif %}
  <div class="carousel carousel-slider center">
    <div class="carousel-fixed-item center">
        {% if user %}
            <a class="waves-effect waves-light btn jumbotron-btn white blue-text index-btn" href="{{ url_for('dashboard', username=user.username) }}"><span class="index-btn-text"><strong>Dashboard</strong></span></a>
             <a class="waves-effect waves-light btn jumbotron-btn white blue-text index-btn" href="{{ url_for('dashboard', username=user.username) }}"><span class="index-btn-text"><strong>Goals</strong></span></a>
        {% else %}
        <a class="waves-effect waves-light btn jumbotron-btn white blue-text index-btn" href="{{ url_for('signup') }}"><span class="index-btn-text"><strong>Sign up</strong></span></a>
        <a class="waves-effect waves-light btn jumbotron-btn white blue-text index-btn" href="{{ url_for('login') }}"><span class="index-btn-text"><strong>Log In</strong></span></a>
        {% endif %}
    </div>
    <div class="carousel-item" id="index-carousel-one" href="#one!">
        <div class="row white" style="margin-top: 25vh;">
            <div class="col s12">
                <h3 class="spaced-text dark-blue-lowpoly" style="padding: 10px"><strong>{{ "{:,}".format(app_stats.users_total)}} savers use track</strong></h3>
                {% if user %}
                <h5 class="dark-blue-lowpoly uppercase spaced-text">We'd only be <strong>{{ "{:,}".format(app_stats.users_total - 1)}}</strong> without you!</h5>
                {% else %}
                <h5 class="dark-blue-lowpoly uppercase spaced-text">We'd love you to make it <strong>{{ "{:,}".format(app_stats.users_total + 1)}}</strong></h5>
                {% endif %}
            </div>     
        </div>
    </div>
    <div class="carousel-item " id="index-carousel-two" href="#two!">
        <div class="row white" style="margin-top: 25vh;">
            <div class="col s12">
                <h3 class="spaced-text dark-blue-lowpoly" style="padding: 10px"><strong>{% if user %}{{ user.currency}}{% else %}Â£{% endif %}{{ "{:,.2f}".format(app_stats.saved_total)}} saved so far</strong></h3>
                {% if user %}
                <h5 class="dark-blue-lowpoly uppercase spaced-text">{{ user.currency}}{{ "{:,.2f}".format(user.total_currently_saved) }} of this is yours!</h5>
                {% else %}
                <h5 class="dark-blue-lowpoly uppercase spaced-text">How much could you save?</h5>
                {% endif %}
            </div>     
        </div>
    </div>
    <div class="carousel-item" id="index-carousel-three" href="#three!">
       <div class="row white" style="margin-top: 25vh;">
            <div class="col s12">
                <h3 class="spaced-text dark-blue-lowpoly" style="padding: 10px"><strong>{{ "{:,}".format(app_stats.achieved_goals)}} goals achieved</strong></h3>
                {% if user %}
                    {% if (user.goals_achieved | length) == 0 %}
                        {% if user.deposts_number %}
                        <h5 class="dark-blue-lowpoly uppercase spaced-text">Keep saving and soon it will be {{ "{:,}".format(app_stats.achieved_goals + 1)}}</h5>
                        {% else %}
                        <h5 class="dark-blue-lowpoly uppercase spaced-text">Start saving and soon it will be {{ "{:,}".format(app_stats.achieved_goals + 1)}}</h5>
                        {% endif %}
                     {% elif (user.goals_achieved | length) == 1 %}
                      <h5 class="dark-blue-lowpoly uppercase spaced-text">One of them is yours! </h5>
                     {% else %}
                     <h5 class="dark-blue-lowpoly uppercase spaced-text">{{ user.goals_achieved | length }} of them are yours! </h5>
                    {% endif %}
                {% else %}
                <h5 class="dark-blue-lowpoly uppercase spaced-text">Track can help you achieve yours too </h5>
                {% endif %}
            </div>     
        </div>
    </div>
  </div>
</div>
{% endblock %}
