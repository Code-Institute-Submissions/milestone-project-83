{% extends 'base.html' %} {% block nav_links %}
<li><a href="{{url_for('index')}}">Home</a></li>
<li><a href="#">Dashboard</a></li>
{% if user.goals_number != 0 %}
<li><a class="dropdown-trigger" href="#!" data-target="nav_goals">Goals<i class="material-icons right">arrow_drop_down</i></a></li>
<ul id="nav_goals" class="dropdown-content">
    {% for goal in goals %}
    <li><a href="#" class="uppercase">{{goal.goal_name}}</a></li>
    {% endfor %}
    {% if user.goals_number < 4 %}
    <li class="divider"></li>
    <li><a href="#add-goal-modal" class="modal-trigger uppercase"><i class="material-icons">add_box</i>New</a></li>
    {% endif %} 
</ul>
{% endif %}
<li><a href="#">Profile</a></li>
<li><a href="{{url_for('logout')}}">Log Out</a></li>
{% endblock %} 
{% block content %}
<div class="container-fluid" id="dash-container">
    <!--Fab Menu-->
    <div class="fixed-action-btn" id="cards-fab">
        <a class="btn-floating horizontal btn-large red" id="cards-fab-main-btn">
        <i class="large material-icons">dashboard</i>
        </a>
        <ul id="goal-fab-ul">
        {% if (goals | length) < 4%}
        <li>
            <a class="btn-floating darken-1 goal-fab-card"
            ><i class="material-icons">add</i></a
            >
        </li>
        {% endif %} {% for goal in goals %}
        <li>
            <a class="btn-floating darken-1 goal-fab-card" style="background-image: url({{ goal.image_url }})"></a>
        </li>
        {% endfor %}
        </ul>
    </div>
    <div class="row">
        <div class="col s12 m6 {% if user.goals_number == 0 %} offset-m3 {% endif %}">
            <!--Main Card-->
            <div class="card">
                <div class="card-content center blue-text">
                    <h4 id="main-card-title" class="center uppercase spaced-text"><strong>{{ user.fname }} {{ user.lname }}</strong></h4>
                    <span><a href="#" class="savings-card-link modal-trigger center"><strong>View Profile</strong></a></span>
                    <br />
                    {% if user.goals_number == 0 %}
                    <h6 class="create-goal-prompt spaced-text"><strong>Create a goal to start saving!</strong></h6>
                    <a href="#add-goal-modal" class="btn modal-trigger center spaced-text waves-effect waves-white create-goal-btn"><strong>Create Goal</strong></a>
                    {% elif  user.goals_number == 1 %}
                    <span class="uppercase spaced-text">1 Goal</span>
                    <br>
                    <span class="uppercase spaced-text">{{ user.currency }}{{ "{:,.2f}".format(user.total_currently_saved) }} saved</span>
                    {% else %}
                    <h5 class="uppercase spaced-text">{{ user.goals_number }} Goals</h5>
                    <h5 class="uppercase"><strong>{{ user.currency }}{{ "{:,.2f}".format(user.total_currently_saved) }} saved<strong></h5>
                    {% endif %}
                </div> 
            </div>
        </div> 
    </div>
</div>
{% endblock %} 
{% block include_js_html %}
{% include 'dash_js.html'%}
{% endblock %}
